<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <title>Air Hockey</title>
        <link rel="stylesheet" href="./style.css" />

        <script src="https://www.gstatic.com/firebasejs/8.0.2/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.0.2/firebase-auth.js"></script>    
        <script src="https://www.gstatic.com/firebasejs/8.0.2/firebase-analytics.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.0.2/firebase-database.js"></script>

    </head>
    <body>
        <h3>Enter your information below</h3>
        
        <input type="email" placeholder="EMAIL" id="email"/>
        <input type="password" placeholder="PASSWORD" id="password"/><br><br>
        <button onclick="login()" id="login">Log In</button>
        <button onclick="signup()">Sign Up</button><br><br>
        <button onclick="logout()" style="visibility:hidden;" id="logout">Log Out</button><br><br>
        

        <div>
            <p id="message"></p>
        </div>

        <button><a href="./index.html">Back</a></button>

    </body>
    var firebaseConfig = {
        apiKey: "AIzaSyB-lgXhucMRV0wReeKM0xUxe4wM5pRdxvM",
        authDomain: "air-hockey-69934.firebaseapp.com",
        projectId: "air-hockey-69934",
        storageBucket: "air-hockey-69934.appspot.com",
        messagingSenderId: "233786067364",
        appId: "1:233786067364:web:5f121b60a0501bd7f91931"
  };
    };
    // Initialize Firebase
    if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
    }
    firebase.analytics();
      
    const auth = firebase.auth();
    const db = firebase.database();

    auth.onAuthStateChanged( function(user) {
        if (user) {
            document.getElementById("message").innerHTML = "Welcome " + user.email + "!";
            document.getElementById("logout").style.visibility = "visible";
            document.getElementById("login").style.visibility = "hidden";
        } else {
            document.getElementById("message").innerHTML = "Welcome!";
            document.getElementById("login").style.visibility = "visible";
            document.getElementById("logout").style.visibility = "hidden";
        }
    });

    </script>
        
    <script>
        function login() {
            let email = document.getElementById("email").value;
            let password = document.getElementById("password").value;
            auth.signInWithEmailAndPassword(email, password).catch( function(error) {
                let errorCode = error.code;
                let errorMessage = error.message;
                document.getElementById("message").innerHTML = "There was an error logging in! Try again.";
            });
        };

        function signup() {
            let email = document.getElementById("email").value;
            let password = document.getElementById("password").value;

            auth.createUserWithEmailAndPassword(email, password)
            .then((userCredential) => {
                var user = userCredential.user;
            })
            .catch((error) => {
                var errorCode = error.code;
                var errorMessage = error.message;
                document.getElementById("message").innerHTML = "There was an error signing up! Try again.";
            });
        }

        function logout() {
            auth.signOut().then(() => {

            }).catch((error) => {
                document.getElementById("message").innerHTML = "There was an error signing out! Try again.";
            });
        };
    </script>
</html>
